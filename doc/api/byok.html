<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>BYOK (Bring Your Own Key)</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="API.html"><div class="inner"><span>API Reference</span></div></a></li><li class="depth-1  current"><a href="byok.html"><div class="inner"><span>BYOK (Bring Your Own Key)</span></div></a></li><li class="depth-1 "><a href="debugging.html"><div class="inner"><span>MCP Server Debugging Guide</span></div></a></li><li class="depth-1 "><a href="getting-started.html"><div class="inner"><span>Getting Started with the Copilot SDK for Clojure</span></div></a></li><li class="depth-1 "><a href="index.html"><div class="inner"><span>Authentication</span></div></a></li><li class="depth-1 "><a href="index.html"><div class="inner"><span>Documentation</span></div></a></li><li class="depth-1 "><a href="overview.html"><div class="inner"><span>Using MCP Servers with the Copilot SDK for Clojure</span></div></a></li><li class="depth-1 "><a href="style.html"><div class="inner"><span>Documentation Style Guide</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>github</span></div></div></li><li class="depth-2"><a href="github.copilot-sdk.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>copilot-sdk</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.instrument.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrument</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.process.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>process</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.protocol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocol</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="github.copilot-sdk.tools.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tools</span></div></a></li><li class="depth-3"><a href="github.copilot-sdk.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#byok-bring-your-own-key" id="byok-bring-your-own-key"></a>BYOK (Bring Your Own Key)</h1>
<p>BYOK allows you to use the Copilot SDK with your own API keys from model providers, bypassing GitHub Copilot authentication. This is useful for enterprise deployments, custom model hosting, or when you want direct billing with your model provider.</p>
<h2><a href="#supported-providers" id="supported-providers"></a>Supported Providers</h2>
<table>
<thead>
<tr><th> Provider </th><th> <code>:provider-type</code> </th><th> Notes </th></tr>
</thead>
<tbody>
<tr><td> OpenAI </td><td> <code>:openai</code> </td><td> OpenAI API and OpenAI-compatible endpoints </td></tr>
<tr><td> Azure OpenAI / Azure AI Foundry </td><td> <code>:azure</code> </td><td> Azure-hosted models </td></tr>
<tr><td> Anthropic </td><td> <code>:anthropic</code> </td><td> Claude models </td></tr>
<tr><td> Ollama </td><td> <code>:openai</code> </td><td> Local models via OpenAI-compatible API </td></tr>
<tr><td> Other OpenAI-compatible </td><td> <code>:openai</code> </td><td> vLLM, LiteLLM, etc. </td></tr>
</tbody>
</table>
<h2><a href="#quick-start-azure-ai-foundry" id="quick-start-azure-ai-foundry"></a>Quick Start: Azure AI Foundry</h2>
<pre><code class="language-clojure">(require '[github.copilot-sdk :as copilot])
(require '[github.copilot-sdk.helpers :as h])

(copilot/with-client-session [session
                              {:model "gpt-5.2-codex"
                               :provider {:provider-type :openai
                                          :base-url "https://your-resource.openai.azure.com/openai/v1/"
                                          :wire-api :responses
                                          :api-key (System/getenv "FOUNDRY_API_KEY")}}]
  (println (h/query "What is 2+2?" :session session)))
</code></pre>
<h2><a href="#quick-start-openai-direct" id="quick-start-openai-direct"></a>Quick Start: OpenAI Direct</h2>
<pre><code class="language-clojure">(copilot/with-client-session [session
                              {:model "gpt-5.2"
                               :provider {:provider-type :openai
                                          :base-url "https://api.openai.com/v1"
                                          :api-key (System/getenv "OPENAI_API_KEY")}}]
  (println (h/query "Hello!" :session session)))
</code></pre>
<h2><a href="#quick-start-ollama-local" id="quick-start-ollama-local"></a>Quick Start: Ollama (Local)</h2>
<pre><code class="language-clojure">;; No API key needed for local Ollama
(copilot/with-client-session [session
                              {:model "llama3"
                               :provider {:provider-type :openai
                                          :base-url "http://localhost:11434/v1"}}]
  (println (h/query "Hello!" :session session)))
</code></pre>
<h2><a href="#quick-start-anthropic" id="quick-start-anthropic"></a>Quick Start: Anthropic</h2>
<pre><code class="language-clojure">(copilot/with-client-session [session
                              {:model "claude-sonnet-4"
                               :provider {:provider-type :anthropic
                                          :base-url "https://api.anthropic.com"
                                          :api-key (System/getenv "ANTHROPIC_API_KEY")}}]
  (println (h/query "Hello!" :session session)))
</code></pre>
<h2><a href="#provider-configuration-reference" id="provider-configuration-reference"></a>Provider Configuration Reference</h2>
<h3><a href="#provider-fields" id="provider-fields"></a><code>:provider</code> Fields</h3>
<table>
<thead>
<tr><th> Field </th><th> Type </th><th> Required </th><th> Description </th></tr>
</thead>
<tbody>
<tr><td> <code>:base-url</code> </td><td> string </td><td> <strong>Yes</strong> </td><td> API endpoint URL </td></tr>
<tr><td> <code>:provider-type</code> </td><td> keyword </td><td> No </td><td> <code>:openai</code>, <code>:azure</code>, or <code>:anthropic</code> (default: <code>:openai</code>) </td></tr>
<tr><td> <code>:wire-api</code> </td><td> keyword </td><td> No </td><td> <code>:completions</code> or <code>:responses</code> (default: <code>:completions</code>) </td></tr>
<tr><td> <code>:api-key</code> </td><td> string </td><td> No </td><td> API key (optional for local providers like Ollama) </td></tr>
<tr><td> <code>:bearer-token</code> </td><td> string </td><td> No </td><td> Bearer token auth (takes precedence over <code>:api-key</code>) </td></tr>
<tr><td> <code>:azure-options</code> </td><td> map </td><td> No </td><td> Azure-specific options (see below) </td></tr>
</tbody>
</table>
<h3><a href="#azure-options" id="azure-options"></a>Azure Options</h3>
<table>
<thead>
<tr><th> Field </th><th> Type </th><th> Default </th><th> Description </th></tr>
</thead>
<tbody>
<tr><td> <code>:azure-api-version</code> </td><td> string </td><td> <code>"2024-10-21"</code> </td><td> Azure API version </td></tr>
</tbody>
</table>
<h3><a href="#wire-api-format" id="wire-api-format"></a>Wire API Format</h3>
<p>The <code>:wire-api</code> setting determines which OpenAI API format to use:</p>
<ul>
<li><strong><code>:completions</code></strong> (default) — Chat Completions API (<code>/chat/completions</code>). Use for most models.</li>
<li><strong><code>:responses</code></strong> — Responses API. Use for GPT-5 series models that support the newer responses format.</li>
</ul>
<h3><a href="#provider-type-notes" id="provider-type-notes"></a>Provider-Type Notes</h3>
<p><strong><code>:openai</code></strong> — Works with OpenAI API and any OpenAI-compatible endpoint. <code>:base-url</code> should include the full path (e.g., <code>"https://api.openai.com/v1"</code>).</p>
<p><strong><code>:azure</code></strong> — For native Azure OpenAI endpoints. <code>:base-url</code> should be just the host (e.g., <code>"https://my-resource.openai.azure.com"</code>). Do NOT include <code>/openai/v1/</code> in the URL — the SDK handles path construction.</p>
<p><strong><code>:anthropic</code></strong> — For direct Anthropic API access. Uses Claude-specific API format.</p>
<h2><a href="#example-configurations" id="example-configurations"></a>Example Configurations</h2>
<h3><a href="#azure-openai-native-azure-endpoint" id="azure-openai-native-azure-endpoint"></a>Azure OpenAI (Native Azure Endpoint)</h3>
<p>Use <code>:azure</code> type for endpoints at <code>*.openai.azure.com</code>:</p>
<pre><code class="language-clojure">{:model "gpt-5.2"
 :provider {:provider-type :azure
            :base-url "https://my-resource.openai.azure.com"
            :api-key (System/getenv "AZURE_OPENAI_KEY")
            :azure-options {:azure-api-version "2024-10-21"}}}
</code></pre>
<h3><a href="#azure-ai-foundry-openai-compatible-endpoint" id="azure-ai-foundry-openai-compatible-endpoint"></a>Azure AI Foundry (OpenAI-Compatible Endpoint)</h3>
<p>For Azure AI Foundry deployments with <code>/openai/v1/</code> endpoints, use <code>:openai</code>:</p>
<pre><code class="language-clojure">{:model "gpt-5.2-codex"
 :provider {:provider-type :openai
            :base-url "https://your-resource.openai.azure.com/openai/v1/"
            :api-key (System/getenv "FOUNDRY_API_KEY")
            :wire-api :responses}}
</code></pre>
<h3><a href="#bearer-token-authentication" id="bearer-token-authentication"></a>Bearer Token Authentication</h3>
<p>Some providers require bearer token authentication instead of API keys:</p>
<pre><code class="language-clojure">{:model "my-model"
 :provider {:provider-type :openai
            :base-url "https://my-custom-endpoint.example.com/v1"
            :bearer-token (System/getenv "MY_BEARER_TOKEN")}}
</code></pre>
<h2><a href="#limitations" id="limitations"></a>Limitations</h2>
<h3><a href="#identity-limitations" id="identity-limitations"></a>Identity Limitations</h3>
<p>BYOK authentication is <strong>key-based only</strong>. The following are NOT supported:</p>
<ul>
<li>❌ Microsoft Entra ID (Azure AD) managed identities or service principals</li>
<li>❌ Third-party identity providers (OIDC, SAML, etc.)</li>
<li>❌ Azure Managed Identity</li>
</ul>
<p>You must use an API key or bearer token that you manage yourself.</p>
<h3><a href="#feature-limitations" id="feature-limitations"></a>Feature Limitations</h3>
<ul>
<li><strong>Model availability</strong> — Only models supported by your provider</li>
<li><strong>Rate limiting</strong> — Subject to your provider’s rate limits, not Copilot’s</li>
<li><strong>Usage tracking</strong> — Tracked by your provider, not GitHub Copilot</li>
<li><strong>Premium requests</strong> — Do not count against Copilot premium request quotas</li>
</ul>
<h2><a href="#troubleshooting" id="troubleshooting"></a>Troubleshooting</h2>
<h3><a href="#model-not-specified-error" id="model-not-specified-error"></a>“Model not specified” Error</h3>
<p>When using BYOK, the <code>:model</code> parameter is <strong>required</strong>:</p>
<pre><code class="language-clojure">;; ❌ Error: Model required with custom provider
{:provider {:provider-type :openai :base-url "..."}}

;; ✅ Correct: Model specified
{:model "gpt-5.2"
 :provider {:provider-type :openai :base-url "..."}}
</code></pre>
<h3><a href="#azure-endpoint-type-confusion" id="azure-endpoint-type-confusion"></a>Azure Endpoint Type Confusion</h3>
<p>For Azure OpenAI endpoints (<code>*.openai.azure.com</code>), use the correct type:</p>
<pre><code class="language-clojure">;; ❌ Wrong: Using :openai type with native Azure endpoint
{:provider {:provider-type :openai
            :base-url "https://my-resource.openai.azure.com"}}

;; ✅ Correct: Using :azure type
{:provider {:provider-type :azure
            :base-url "https://my-resource.openai.azure.com"}}
</code></pre>
<p>However, if your Azure AI Foundry deployment provides an OpenAI-compatible endpoint path (e.g., <code>/openai/v1/</code>), use <code>:openai</code>:</p>
<pre><code class="language-clojure">;; ✅ Correct: OpenAI-compatible Azure AI Foundry endpoint
{:provider {:provider-type :openai
            :base-url "https://your-resource.openai.azure.com/openai/v1/"}}
</code></pre>
<h3><a href="#connection-refused-ollama" id="connection-refused-ollama"></a>Connection Refused (Ollama)</h3>
<p>Ensure Ollama is running and accessible:</p>
<pre><code class="language-bash"># Check Ollama is running
curl http://localhost:11434/v1/models

# Start Ollama if not running
ollama serve
</code></pre>
<h3><a href="#authentication-failed" id="authentication-failed"></a>Authentication Failed</h3>
<ol>
<li>Verify your API key is correct and not expired</li>
<li>Check the <code>:base-url</code> matches your provider’s expected format</li>
<li>For bearer tokens, ensure the full token is provided (not just a prefix)</li>
</ol>
<h2><a href="#next-steps" id="next-steps"></a>Next Steps</h2>
<ul>
<li><a href="./index.html">Authentication Overview</a> — All authentication methods</li>
<li><a href="../getting-started.html">Getting Started Guide</a> — Build your first Copilot-powered app</li>
</ul>
</div></div></div></body></html>