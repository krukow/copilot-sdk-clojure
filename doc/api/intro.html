<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Introduction to krukow/copilot-sdk</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="intro.html"><div class="inner"><span>Introduction to krukow/copilot-sdk</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>krukow</span></div></div></li><li class="depth-2"><a href="krukow.copilot-sdk.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>copilot-sdk</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.instrument.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrument</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.process.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>process</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.protocol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocol</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="krukow.copilot-sdk.tools.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tools</span></div></a></li><li class="depth-3"><a href="krukow.copilot-sdk.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#introduction-to-krukowcopilot-sdk" id="introduction-to-krukowcopilot-sdk"></a>Introduction to krukow/copilot-sdk</h1>
<p><code>krukow/copilot-sdk</code> is a Clojure SDK for programmatic control of the GitHub Copilot CLI server via JSON-RPC. It provides a small, idiomatic surface for creating sessions, sending prompts, handling tool calls, and subscribing to streaming events using core.async.</p>
<h2><a href="#what-you-can-do" id="what-you-can-do"></a>What you can do</h2>
<ul>
<li>Start and stop a Copilot client (stdio or TCP)</li>
<li>Create and resume sessions</li>
<li>Send messages synchronously (<code>send-and-wait!</code>) or asynchronously (<code>send!</code>, <code>send-async</code>)</li>
<li>Subscribe to session events for streaming and orchestration</li>
<li>Define tools with JSON Schema and handle tool calls in Clojure</li>
</ul>
<h2><a href="#quick-start" id="quick-start"></a>Quick start</h2>
<pre><code class="language-clojure">(require '[krukow.copilot-sdk :as copilot])

(def client (copilot/client {:log-level :info}))
(copilot/start! client)

(def session (copilot/create-session client {:model "gpt-5"}))
(def response (copilot/send-and-wait! session {:prompt "What is 2+2?"}))
(println (get-in response [:data :content]))

(copilot/destroy! session)
(copilot/stop! client)
</code></pre>
<h2><a href="#events-and-streaming" id="events-and-streaming"></a>Events and streaming</h2>
<p>Sessions emit events on a core.async mult. You can tap it to stream deltas, tool execution events, or wait for <code>session.idle</code> to know processing is complete.</p>
<pre><code class="language-clojure">(require '[clojure.core.async :refer [chan tap go-loop &lt;!]])

(let [ch (chan 100)]
  (tap (copilot/events session) ch)
  (go-loop []
    (when-let [event (&lt;! ch)]
      (println (:type event))
      (recur))))
</code></pre>
<h2><a href="#tools" id="tools"></a>Tools</h2>
<p>Define tools with JSON Schema and provide handlers:</p>
<pre><code class="language-clojure">(def lookup-tool
  (copilot/define-tool "lookup"
    {:description "Lookup a value"
     :parameters {:type "object"
                  :properties {:id {:type "string"}}
                  :required ["id"]}
     :handler (fn [{:keys [id]} _]
                (copilot/result-success (str "value=" id))) }))
</code></pre>
<h2><a href="#where-to-go-next" id="where-to-go-next"></a>Where to go next</h2>
<ul>
<li>See <code>README.md</code> for the full API and examples</li>
<li>Browse <code>examples/</code> for working applications</li>
<li>Generate API docs with <code>bb docs</code> (output in <code>doc/api/</code>)</li>
</ul>
</div></div></div></body></html>